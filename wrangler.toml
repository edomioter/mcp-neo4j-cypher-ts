# MCP Neo4j Cypher Server - Cloudflare Workers Configuration
name = "mcp-neo4j-cypher"
main = "src/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "fbe074a4d149441eb68832d5b116cbf6"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Environment variables (non-sensitive)
[vars]
ENVIRONMENT = "development"
DEFAULT_READ_TIMEOUT = "30"
DEFAULT_TOKEN_LIMIT = "10000"
DEFAULT_SCHEMA_SAMPLE = "1000"
ALLOWED_ORIGINS = "https://claude.ai,https://www.claude.ai"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "mcp-neo4j-users"
database_id = "placeholder-replace-with-actual-id"

# KV Namespace binding
[[kv_namespaces]]
binding = "SESSIONS"
id = "placeholder-replace-with-actual-id"

# ============================================
# Staging Environment
# ============================================
[env.staging]
name = "mcp-neo4j-cypher-staging"

[env.staging.vars]
ENVIRONMENT = "staging"
DEFAULT_READ_TIMEOUT = "30"
DEFAULT_TOKEN_LIMIT = "10000"
DEFAULT_SCHEMA_SAMPLE = "1000"
ALLOWED_ORIGINS = "https://claude.ai,https://www.claude.ai"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "mcp-neo4j-users-staging"
database_id = "b0afd894-f058-4b38-9593-021dc5e1f79e"

[[env.staging.kv_namespaces]]
binding = "SESSIONS"
id = "6273d16c007743598a144f6443872e7a"

# ============================================
# Production Environment
# ============================================
[env.production]
name = "mcp-neo4j-cypher"

[env.production.vars]
ENVIRONMENT = "production"
DEFAULT_READ_TIMEOUT = "30"
DEFAULT_TOKEN_LIMIT = "10000"
DEFAULT_SCHEMA_SAMPLE = "1000"
ALLOWED_ORIGINS = "https://claude.ai,https://www.claude.ai"

[[env.production.d1_databases]]
binding = "DB"
database_name = "mcp-neo4j-users-prod"
database_id = "40e22b7e-96ca-453d-9263-8fcfa61df034"

[[env.production.kv_namespaces]]
binding = "SESSIONS"
id = "dfd68ab532eb4ccb82289c310eb089af"

# ============================================
# Secrets (configure via wrangler secret put)
# ============================================
# ENCRYPTION_KEY - AES-256 key for encrypting Neo4j credentials
# Run: openssl rand -base64 32 | wrangler secret put ENCRYPTION_KEY
